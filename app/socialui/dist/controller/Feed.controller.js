sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/m/MessageToast"],function(t,e,o){"use strict";return t.extend("socialui.controller.Feed",{onCreatePost:function(){var t=this.getView();if(!this._oCreateDialog){e.load({id:t.getId(),name:"socialui.fragment.CreatePost",controller:this}).then(function(e){this._oCreateDialog=e;t.addDependent(e);e.open()}.bind(this))}else{this._oCreateDialog.open()}},onSavePost:function(){var t=this.getView();var e=t.getModel();var o=this.byId("postContent").getValue();if(this._editContext){this._editContext.setProperty("content",o);setTimeout(function(){this._editContext=null;this._oCreateDialog.close();this.byId("postContent").setValue("");sap.m.MessageToast.show("Post updated ‚úèÔ∏è")}.bind(this),0);return}if(!o){sap.m.MessageToast.show("Post cannot be empty");return}var s=this.byId("postList");var n=s.getBinding("items");n.create({content:o,createdAt:(new Date).toISOString()});this._oCreateDialog.close();this.byId("postContent").setValue("");sap.m.MessageToast.show("Post created üöÄ")},onEditPost:function(t){var e=t.getSource();var o=e.getParent().getParent();var s=o.getBindingContext();this._editContext=s;this.onCreatePost();this.byId("postContent").setValue(s.getProperty("content"))},onDeletePost:function(t){var e=this.byId("postList");var o=t.getSource();var s=o.getParent().getParent();var n=s.getBindingContext();if(!n){sap.m.MessageToast.show("No context found");return}e.setBusy(true);n.delete().then(function(){e.getBinding("items").refresh();e.setBusy(false);sap.m.MessageToast.show("Post deleted üóëÔ∏è")}).catch(function(){e.setBusy(false);sap.m.MessageToast.show("Error deleting post")})},onCancelPost:function(){this._oCreateDialog.close();this.byId("postContent").setValue("");this._editContext=null},onDialogAfterOpen:function(){if(this._editContext){this.byId("postContent").setValue(this._editContext.getProperty("content"))}}})});
//# sourceMappingURL=Feed.controller.js.map